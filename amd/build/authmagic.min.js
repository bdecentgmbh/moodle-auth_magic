/**
 * Magic authentication define js.
 * @module   auth_magic
 * @copyright  2023 bdecent gmbh <https://bdecent.de>
 * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("auth_magic/authmagic",[],(function(){var AuthMagic=function(params){return params.loginhook&&this.magicLoginHook(params),!0};return AuthMagic.prototype.getMagicLink=function(params,linkId){var authSelector=linkId+' .potentialidplist a[title="'+params.strbutton+'"]',MagicLink="";if(authSelector&&void 0===(MagicLink=document.querySelectorAll(authSelector)[0])){authSelector=linkId+" .login-identityproviders a";var MagicLinks=document.querySelectorAll(authSelector);MagicLinks.length&&MagicLinks.forEach((function(item){item.innerHTML.trim()==params.strbutton&&(MagicLink=item)}))}return MagicLink},AuthMagic.prototype.magicLoginHook=function(params){var MagicLink=this.getMagicLink(params,"#page-login-index");MagicLink&&this.magicLoginHandler(MagicLink,"form#login #username")},AuthMagic.prototype.magicLoginHandler=function(MagicLink,mailHandler){MagicLink.addEventListener("click",(function(e){e.preventDefault();var returnurl=e.currentTarget.getAttribute("href"),userValue="",mailSelector=document.querySelectorAll(mailHandler)[0];mailSelector&&(userValue=mailSelector.value);var form=document.createElement("form");form.setAttribute("method","post"),form.setAttribute("action",returnurl),form.setAttribute("id","magic-login-form");var magicLogin=document.createElement("input");magicLogin.setAttribute("type","hidden"),magicLogin.setAttribute("name","magiclogin"),magicLogin.setAttribute("value",1);var uservalue=document.createElement("input");uservalue.setAttribute("type","hidden"),uservalue.setAttribute("name","uservalue"),uservalue.setAttribute("value",userValue),form.appendChild(magicLogin),form.appendChild(uservalue),MagicLink.parentNode.appendChild(form),document.querySelectorAll("form#magic-login-form")[0].submit()}))},{init:function(params){return new AuthMagic(params)}}}));

//# sourceMappingURL=authmagic.min.js.map